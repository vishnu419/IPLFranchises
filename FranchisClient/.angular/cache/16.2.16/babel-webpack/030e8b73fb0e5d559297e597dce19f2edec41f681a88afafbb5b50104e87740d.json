{"ast":null,"code":"var _OrderHistoryComponent;\nimport { NgIf, NgFor } from '@angular/common';\nimport { DatePipe } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../core/services/order.service\";\nfunction OrderHistoryComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Loading orders\\u2026\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OrderHistoryComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.error);\n  }\n}\nfunction OrderHistoryComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"No orders found.\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/products\", a1];\n};\nfunction OrderHistoryComponent_div_6_div_2_tr_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\")(2, \"a\", 12);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r8 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(5, _c0, item_r8.productId));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r8.productName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r8.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u20B9\", item_r8.price, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u20B9\", item_r8.price * item_r8.quantity, \"\");\n  }\n}\nfunction OrderHistoryComponent_div_6_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8)(2, \"b\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 9);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"table\", 10)(8, \"thead\")(9, \"tr\")(10, \"th\");\n    i0.ɵɵtext(11, \"Product\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Quantity\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\");\n    i0.ɵɵtext(17, \"Subtotal\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(18, \"tbody\");\n    i0.ɵɵtemplate(19, OrderHistoryComponent_div_6_div_2_tr_19_Template, 10, 7, \"tr\", 11);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const order_r6 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Order #\", order_r6.id, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"(\", i0.ɵɵpipeBind2(6, 3, order_r6.orderDate, \"medium\"), \")\");\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"ngForOf\", order_r6.items);\n  }\n}\nfunction OrderHistoryComponent_div_6_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function OrderHistoryComponent_div_6_div_3_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.onPageChange(ctx_r9.page - 1));\n    });\n    i0.ɵɵtext(2, \"Prev\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function OrderHistoryComponent_div_6_div_3_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.onPageChange(ctx_r11.page + 1));\n    });\n    i0.ɵɵtext(6, \"Next\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r5.page === 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"Page \", ctx_r5.page, \" of \", ctx_r5.totalPages, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r5.page === ctx_r5.totalPages);\n  }\n}\nfunction OrderHistoryComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 4);\n    i0.ɵɵtemplate(2, OrderHistoryComponent_div_6_div_2_Template, 20, 6, \"div\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, OrderHistoryComponent_div_6_div_3_Template, 7, 4, \"div\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.orders);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.totalPages > 1);\n  }\n}\nexport class OrderHistoryComponent {\n  constructor(orderService) {\n    this.orderService = orderService;\n    this.orders = [];\n    this.loading = false;\n    this.error = null;\n    this.page = 1;\n    this.pageSize = 10;\n    this.totalCount = 0;\n  }\n  ngOnInit() {\n    this.fetchOrders();\n  }\n  fetchOrders() {\n    this.loading = true;\n    this.error = null;\n    this.orderService.getPagedOrders(this.page, this.pageSize).subscribe({\n      next: res => {\n        this.orders = res.items;\n        this.totalCount = res.totalCount;\n        this.loading = false;\n      },\n      error: err => {\n        this.error = 'Failed to load orders.';\n        this.loading = false;\n      }\n    });\n  }\n  onPageChange(page) {\n    if (page < 1 || page > this.totalPages) return;\n    this.page = page;\n    this.fetchOrders();\n  }\n  get totalPages() {\n    return Math.max(1, Math.ceil(this.totalCount / this.pageSize));\n  }\n}\n_OrderHistoryComponent = OrderHistoryComponent;\n_OrderHistoryComponent.ɵfac = function OrderHistoryComponent_Factory(t) {\n  return new (t || _OrderHistoryComponent)(i0.ɵɵdirectiveInject(i1.OrderService));\n};\n_OrderHistoryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _OrderHistoryComponent,\n  selectors: [[\"app-order-history\"]],\n  standalone: true,\n  features: [i0.ɵɵStandaloneFeature],\n  decls: 7,\n  vars: 4,\n  consts: [[1, \"order-history-page\"], [4, \"ngIf\"], [\"class\", \"order-error\", 4, \"ngIf\"], [1, \"order-error\"], [1, \"order-list\"], [\"class\", \"order-card\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"pagination\", 4, \"ngIf\"], [1, \"order-card\"], [1, \"order-header\"], [1, \"date\"], [1, \"order-items\"], [4, \"ngFor\", \"ngForOf\"], [1, \"product-link\", 3, \"routerLink\"], [1, \"pagination\"], [3, \"disabled\", \"click\"]],\n  template: function OrderHistoryComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n      i0.ɵɵtext(2, \"Order History\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, OrderHistoryComponent_div_3_Template, 2, 0, \"div\", 1);\n      i0.ɵɵtemplate(4, OrderHistoryComponent_div_4_Template, 2, 1, \"div\", 2);\n      i0.ɵɵtemplate(5, OrderHistoryComponent_div_5_Template, 2, 0, \"div\", 1);\n      i0.ɵɵtemplate(6, OrderHistoryComponent_div_6_Template, 4, 2, \"div\", 1);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.loading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.error);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.error && !ctx.orders.length);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.orders.length);\n    }\n  },\n  dependencies: [NgIf, NgFor, DatePipe],\n  styles: [\".order-history-page[_ngcontent-%COMP%] {\\n\\tmax-width: 700px;\\n\\tmargin: 2rem auto;\\n\\tbackground: #fff;\\n\\tpadding: 2rem;\\n\\tborder-radius: 10px;\\n\\tbox-shadow: 0 2px 12px rgba(0,0,0,0.07);\\n}\\nh2[_ngcontent-%COMP%] {\\n\\tcolor: var(--ipl-primary);\\n\\tmargin-bottom: 1.5rem;\\n}\\n.order-list[_ngcontent-%COMP%] {\\n\\tmargin-bottom: 1.5rem;\\n}\\n.order-card[_ngcontent-%COMP%] {\\n\\tborder: 1px solid #e0e0e0;\\n\\tborder-radius: 8px;\\n\\tmargin-bottom: 1.5rem;\\n\\tpadding: 1.2rem 1.5rem;\\n\\tbackground: #fafcff;\\n\\tbox-shadow: 0 1px 4px rgba(0,0,0,0.03);\\n}\\n.order-header[_ngcontent-%COMP%] {\\n\\tfont-size: 1.1rem;\\n\\tmargin-bottom: 0.7rem;\\n\\tcolor: #ff6f00;\\n\\tfont-weight: 600;\\n}\\n.order-items[_ngcontent-%COMP%] {\\n\\twidth: 100%;\\n\\tborder-collapse: collapse;\\n\\tmargin-bottom: 0.5rem;\\n}\\n.order-items[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .order-items[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n\\tborder: 1px solid #e0e0e0;\\n\\tpadding: 0.5rem 0.8rem;\\n\\ttext-align: left;\\n}\\n.order-items[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\n\\tbackground: #f5f5f5;\\n\\tcolor: #333;\\n}\\n.order-items[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n\\tbackground: #fff;\\n}\\n.product-link[_ngcontent-%COMP%] {\\n\\tcolor: #1976d2;\\n\\ttext-decoration: underline;\\n\\tcursor: pointer;\\n\\ttransition: color 0.2s;\\n}\\n.product-link[_ngcontent-%COMP%]:hover {\\n\\tcolor: #ff6f00;\\n}\\n.pagination[_ngcontent-%COMP%] {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tgap: 1rem;\\n\\tmargin-top: 1.5rem;\\n}\\n.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n\\tbackground: #1976d2;\\n\\tcolor: #fff;\\n\\tborder: none;\\n\\tborder-radius: 4px;\\n\\tpadding: 0.4rem 1.1rem;\\n\\tfont-size: 1rem;\\n\\tcursor: pointer;\\n\\ttransition: background 0.2s;\\n}\\n.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled {\\n\\tbackground: #bdbdbd;\\n\\tcursor: not-allowed;\\n}\\n.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled):hover {\\n\\tbackground: #ff6f00;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvb3JkZXJzL29yZGVyLWhpc3RvcnkuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtDQUNDLGdCQUFnQjtDQUNoQixpQkFBaUI7Q0FDakIsZ0JBQWdCO0NBQ2hCLGFBQWE7Q0FDYixtQkFBbUI7Q0FDbkIsdUNBQXVDO0FBQ3hDO0FBQ0E7Q0FDQyx5QkFBeUI7Q0FDekIscUJBQXFCO0FBQ3RCO0FBQ0E7Q0FDQyxxQkFBcUI7QUFDdEI7QUFDQTtDQUNDLHlCQUF5QjtDQUN6QixrQkFBa0I7Q0FDbEIscUJBQXFCO0NBQ3JCLHNCQUFzQjtDQUN0QixtQkFBbUI7Q0FDbkIsc0NBQXNDO0FBQ3ZDO0FBQ0E7Q0FDQyxpQkFBaUI7Q0FDakIscUJBQXFCO0NBQ3JCLGNBQWM7Q0FDZCxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLFdBQVc7Q0FDWCx5QkFBeUI7Q0FDekIscUJBQXFCO0FBQ3RCO0FBQ0E7Q0FDQyx5QkFBeUI7Q0FDekIsc0JBQXNCO0NBQ3RCLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsbUJBQW1CO0NBQ25CLFdBQVc7QUFDWjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxjQUFjO0NBQ2QsMEJBQTBCO0NBQzFCLGVBQWU7Q0FDZixzQkFBc0I7QUFDdkI7QUFDQTtDQUNDLGNBQWM7QUFDZjtBQUNBO0NBQ0MsYUFBYTtDQUNiLG1CQUFtQjtDQUNuQix1QkFBdUI7Q0FDdkIsU0FBUztDQUNULGtCQUFrQjtBQUNuQjtBQUNBO0NBQ0MsbUJBQW1CO0NBQ25CLFdBQVc7Q0FDWCxZQUFZO0NBQ1osa0JBQWtCO0NBQ2xCLHNCQUFzQjtDQUN0QixlQUFlO0NBQ2YsZUFBZTtDQUNmLDJCQUEyQjtBQUM1QjtBQUNBO0NBQ0MsbUJBQW1CO0NBQ25CLG1CQUFtQjtBQUNwQjtBQUNBO0NBQ0MsbUJBQW1CO0FBQ3BCIiwic291cmNlc0NvbnRlbnQiOlsiLm9yZGVyLWhpc3RvcnktcGFnZSB7XHJcblx0bWF4LXdpZHRoOiA3MDBweDtcclxuXHRtYXJnaW46IDJyZW0gYXV0bztcclxuXHRiYWNrZ3JvdW5kOiAjZmZmO1xyXG5cdHBhZGRpbmc6IDJyZW07XHJcblx0Ym9yZGVyLXJhZGl1czogMTBweDtcclxuXHRib3gtc2hhZG93OiAwIDJweCAxMnB4IHJnYmEoMCwwLDAsMC4wNyk7XHJcbn1cclxuaDIge1xyXG5cdGNvbG9yOiB2YXIoLS1pcGwtcHJpbWFyeSk7XHJcblx0bWFyZ2luLWJvdHRvbTogMS41cmVtO1xyXG59XHJcbi5vcmRlci1saXN0IHtcclxuXHRtYXJnaW4tYm90dG9tOiAxLjVyZW07XHJcbn1cclxuLm9yZGVyLWNhcmQge1xyXG5cdGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7XHJcblx0Ym9yZGVyLXJhZGl1czogOHB4O1xyXG5cdG1hcmdpbi1ib3R0b206IDEuNXJlbTtcclxuXHRwYWRkaW5nOiAxLjJyZW0gMS41cmVtO1xyXG5cdGJhY2tncm91bmQ6ICNmYWZjZmY7XHJcblx0Ym94LXNoYWRvdzogMCAxcHggNHB4IHJnYmEoMCwwLDAsMC4wMyk7XHJcbn1cclxuLm9yZGVyLWhlYWRlciB7XHJcblx0Zm9udC1zaXplOiAxLjFyZW07XHJcblx0bWFyZ2luLWJvdHRvbTogMC43cmVtO1xyXG5cdGNvbG9yOiAjZmY2ZjAwO1xyXG5cdGZvbnQtd2VpZ2h0OiA2MDA7XHJcbn1cclxuLm9yZGVyLWl0ZW1zIHtcclxuXHR3aWR0aDogMTAwJTtcclxuXHRib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xyXG5cdG1hcmdpbi1ib3R0b206IDAuNXJlbTtcclxufVxyXG4ub3JkZXItaXRlbXMgdGgsIC5vcmRlci1pdGVtcyB0ZCB7XHJcblx0Ym9yZGVyOiAxcHggc29saWQgI2UwZTBlMDtcclxuXHRwYWRkaW5nOiAwLjVyZW0gMC44cmVtO1xyXG5cdHRleHQtYWxpZ246IGxlZnQ7XHJcbn1cclxuLm9yZGVyLWl0ZW1zIHRoIHtcclxuXHRiYWNrZ3JvdW5kOiAjZjVmNWY1O1xyXG5cdGNvbG9yOiAjMzMzO1xyXG59XHJcbi5vcmRlci1pdGVtcyB0ZCB7XHJcblx0YmFja2dyb3VuZDogI2ZmZjtcclxufVxyXG4ucHJvZHVjdC1saW5rIHtcclxuXHRjb2xvcjogIzE5NzZkMjtcclxuXHR0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcclxuXHRjdXJzb3I6IHBvaW50ZXI7XHJcblx0dHJhbnNpdGlvbjogY29sb3IgMC4ycztcclxufVxyXG4ucHJvZHVjdC1saW5rOmhvdmVyIHtcclxuXHRjb2xvcjogI2ZmNmYwMDtcclxufVxyXG4ucGFnaW5hdGlvbiB7XHJcblx0ZGlzcGxheTogZmxleDtcclxuXHRhbGlnbi1pdGVtczogY2VudGVyO1xyXG5cdGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG5cdGdhcDogMXJlbTtcclxuXHRtYXJnaW4tdG9wOiAxLjVyZW07XHJcbn1cclxuLnBhZ2luYXRpb24gYnV0dG9uIHtcclxuXHRiYWNrZ3JvdW5kOiAjMTk3NmQyO1xyXG5cdGNvbG9yOiAjZmZmO1xyXG5cdGJvcmRlcjogbm9uZTtcclxuXHRib3JkZXItcmFkaXVzOiA0cHg7XHJcblx0cGFkZGluZzogMC40cmVtIDEuMXJlbTtcclxuXHRmb250LXNpemU6IDFyZW07XHJcblx0Y3Vyc29yOiBwb2ludGVyO1xyXG5cdHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4ycztcclxufVxyXG4ucGFnaW5hdGlvbiBidXR0b246ZGlzYWJsZWQge1xyXG5cdGJhY2tncm91bmQ6ICNiZGJkYmQ7XHJcblx0Y3Vyc29yOiBub3QtYWxsb3dlZDtcclxufVxyXG4ucGFnaW5hdGlvbiBidXR0b246bm90KDpkaXNhYmxlZCk6aG92ZXIge1xyXG5cdGJhY2tncm91bmQ6ICNmZjZmMDA7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["NgIf","NgFor","DatePipe","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r1","error","ɵɵproperty","ɵɵpureFunction1","_c0","item_r8","productId","productName","quantity","ɵɵtextInterpolate1","price","ɵɵtemplate","OrderHistoryComponent_div_6_div_2_tr_19_Template","order_r6","id","ɵɵpipeBind2","orderDate","items","ɵɵlistener","OrderHistoryComponent_div_6_div_3_Template_button_click_1_listener","ɵɵrestoreView","_r10","ctx_r9","ɵɵnextContext","ɵɵresetView","onPageChange","page","OrderHistoryComponent_div_6_div_3_Template_button_click_5_listener","ctx_r11","ctx_r5","ɵɵtextInterpolate2","totalPages","OrderHistoryComponent_div_6_div_2_Template","OrderHistoryComponent_div_6_div_3_Template","ctx_r3","orders","OrderHistoryComponent","constructor","orderService","loading","pageSize","totalCount","ngOnInit","fetchOrders","getPagedOrders","subscribe","next","res","err","Math","max","ceil","ɵɵdirectiveInject","i1","OrderService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","OrderHistoryComponent_Template","rf","ctx","OrderHistoryComponent_div_3_Template","OrderHistoryComponent_div_4_Template","OrderHistoryComponent_div_5_Template","OrderHistoryComponent_div_6_Template","length","styles"],"sources":["C:\\Users\\vishnu.reddy\\works\\iplfranchis\\IPLFranchises\\FranchisClient\\src\\app\\orders\\order-history.component.ts","C:\\Users\\vishnu.reddy\\works\\iplfranchis\\IPLFranchises\\FranchisClient\\src\\app\\orders\\order-history.component.html"],"sourcesContent":["\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { NgIf, NgFor } from '@angular/common';\r\nimport { OrderService } from '../core/services/order.service';\r\nimport { OrderResponse } from '../core/models/order.model';\r\nimport { DatePipe } from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'app-order-history',\r\n  standalone: true,\r\n  imports: [NgIf, NgFor, DatePipe],\r\n  templateUrl: './order-history.component.html',\r\n  styleUrls: ['./order-history.component.css']\r\n})\r\nexport class OrderHistoryComponent implements OnInit {\r\n  orders: OrderResponse[] = [];\r\n  loading = false;\r\n  error: string | null = null;\r\n  page = 1;\r\n  pageSize = 10;\r\n  totalCount = 0;\r\n\r\n  constructor(private orderService: OrderService) {}\r\n\r\n  ngOnInit() {\r\n    this.fetchOrders();\r\n  }\r\n\r\n  fetchOrders() {\r\n    this.loading = true;\r\n    this.error = null;\r\n    this.orderService.getPagedOrders(this.page, this.pageSize).subscribe({\r\n      next: res => {\r\n        this.orders = res.items;\r\n        this.totalCount = res.totalCount;\r\n        this.loading = false;\r\n      },\r\n      error: err => {\r\n        this.error = 'Failed to load orders.';\r\n        this.loading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  onPageChange(page: number) {\r\n    if (page < 1 || page > this.totalPages) return;\r\n    this.page = page;\r\n    this.fetchOrders();\r\n  }\r\n\r\n  get totalPages() {\r\n    return Math.max(1, Math.ceil(this.totalCount / this.pageSize));\r\n  }\r\n}\r\n","<div class=\"order-history-page\">\r\n  <h2>Order History</h2>\r\n  <div *ngIf=\"loading\">Loading orders…</div>\r\n  <div *ngIf=\"error\" class=\"order-error\">{{ error }}</div>\r\n  <div *ngIf=\"!loading && !error && !orders.length\">No orders found.</div>\r\n  <div *ngIf=\"orders.length\">\r\n    <div class=\"order-list\">\r\n      <div class=\"order-card\" *ngFor=\"let order of orders\">\r\n        <div class=\"order-header\">\r\n          <b>Order #{{ order.id }}</b> <span class=\"date\">({{ order.orderDate | date:'medium' }})</span>\r\n        </div>\r\n        <table class=\"order-items\">\r\n          <thead>\r\n            <tr>\r\n              <th>Product</th>\r\n              <th>Quantity</th>\r\n              <th>Price</th>\r\n              <th>Subtotal</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr *ngFor=\"let item of order.items\">\r\n              <td>\r\n                <a [routerLink]=\"['/products', item.productId]\" class=\"product-link\">{{ item.productName }}</a>\r\n              </td>\r\n              <td>{{ item.quantity }}</td>\r\n              <td>₹{{ item.price }}</td>\r\n              <td>₹{{ item.price * item.quantity }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n    <div class=\"pagination\" *ngIf=\"totalPages > 1\">\r\n      <button (click)=\"onPageChange(page-1)\" [disabled]=\"page === 1\">Prev</button>\r\n      <span>Page {{page}} of {{totalPages}}</span>\r\n      <button (click)=\"onPageChange(page+1)\" [disabled]=\"page === totalPages\">Next</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}